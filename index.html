<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PerpusDigital | Ruang Baca Modern</title>
    
    <!-- Memuat Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Konfigurasi Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        paper: { 50: '#FDFBF7', 100: '#F5F2EB', 200: '#E6E2D6' },
                        ink: { 400: '#64748B', 800: '#1E293B', 900: '#0F172A' },
                        softblue: { 50: '#F0F9FF', 100: '#E0F2FE', 400: '#60A5FA', 500: '#3B82F6', 600: '#2563EB' }
                    },
                    boxShadow: {
                        'soft': '0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03)',
                        'glow': '0 0 15px rgba(59, 130, 246, 0.4)',
                    }
                }
            }
        }
    </script>

    <style>
        /* Transisi Halaman Halus */
        .page-section {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }
        .page-section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Loading Screen */
        #loading-screen {
            position: fixed;
            inset: 0;
            z-index: 9999;
            background: #FDFBF7;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.8s ease-out, visibility 0.8s;
        }

        /* Animasi Buku Loader */
        .book-loader {
            --color: #3B82F6;
            --duration: 6.8s;
            width: 32px; height: 12px; position: relative; zoom: 1.5;
        }
        .book-loader .inner { width: 32px; height: 12px; position: relative; transform-origin: 2px 2px; transform: rotateZ(-90deg); animation: book var(--duration) ease infinite; }
        .book-loader .inner .left, .book-loader .inner .right { width: 60px; height: 4px; top: 0; border-radius: 2px; background: var(--color); position: absolute; }
        .book-loader .inner .left { right: 28px; transform-origin: 58px 2px; transform: rotateZ(90deg); animation: left var(--duration) ease infinite; }
        .book-loader .inner .right { left: 28px; transform-origin: 2px 2px; transform: rotateZ(-90deg); animation: right var(--duration) ease infinite; }
        .book-loader .inner .middle { width: 32px; height: 12px; border: 4px solid var(--color); border-top: 0; border-radius: 0 0 9px 9px; transform: translateY(2px); }
        .book-loader ul { margin: 0; padding: 0; list-style: none; position: absolute; left: 50%; top: 0; }
        .book-loader ul li { height: 4px; border-radius: 2px; transform-origin: 100% 2px; width: 48px; right: 0; top: -10px; position: absolute; background: var(--color); transform: rotateZ(0deg) translateX(-18px); animation-duration: var(--duration); animation-timing-function: ease; animation-iteration-count: infinite; }
        .book-loader ul li:nth-child(1) { animation-name: page-0; } .book-loader ul li:nth-child(2) { animation-name: page-1; } .book-loader ul li:nth-child(3) { animation-name: page-2; }
        @keyframes page-0 { 4% { transform: rotateZ(0deg) translateX(-18px); } 13%, 54% { transform: rotateZ(180deg) translateX(-18px); } 63% { transform: rotateZ(0deg) translateX(-18px); } }
        @keyframes page-1 { 5.86% { transform: rotateZ(0deg) translateX(-18px); } 14.74%, 55.86% { transform: rotateZ(180deg) translateX(-18px); } 64.74% { transform: rotateZ(0deg) translateX(-18px); } }
        @keyframes page-2 { 7.72% { transform: rotateZ(0deg) translateX(-18px); } 16.48%, 57.72% { transform: rotateZ(180deg) translateX(-18px); } 66.48% { transform: rotateZ(0deg) translateX(-18px); } }
        @keyframes left { 4% { transform: rotateZ(90deg); } 10%, 40% { transform: rotateZ(0deg); } 46%, 54% { transform: rotateZ(90deg); } 60%, 90% { transform: rotateZ(0deg); } 96% { transform: rotateZ(90deg); } }
        @keyframes right { 4% { transform: rotateZ(-90deg); } 10%, 40% { transform: rotateZ(0deg); } 46%, 54% { transform: rotateZ(-90deg); } 60%, 90% { transform: rotateZ(0deg); } 96% { transform: rotateZ(-90deg); } }
        @keyframes book { 4% { transform: rotateZ(-90deg); } 10%, 40% { transform: rotateZ(0deg); transform-origin: 2px 2px; } 40.01%, 59.99% { transform-origin: 30px 2px; } 46%, 54% { transform: rotateZ(90deg); } 60%, 90% { transform: rotateZ(0deg); transform-origin: 2px 2px; } 96% { transform: rotateZ(-90deg); } }

        .glass-clean {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(226, 232, 240, 0.8);
        }
        
        /* Styling untuk Navigasi Aktif */
        .nav-link.active {
            color: #3B82F6;
            position: relative;
        }
        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: #3B82F6;
            border-radius: 2px;
        }
    </style>
</head>
<body class="bg-paper-50 text-ink-800 font-sans antialiased overflow-x-hidden selection:bg-softblue-500 selection:text-white flex flex-col min-h-screen">

    <!-- ===== LOADING SCREEN ===== -->
    <div id="loading-screen">
        <div class="book-loader">
            <div class="inner"><div class="left"></div><div class="middle"></div><div class="right"></div></div>
            <ul><li></li><li></li><li></li></ul>
        </div>
        <h2 class="mt-8 text-ink-900 font-bold text-lg tracking-widest uppercase">Mempersiapkan Pustaka...</h2>
    </div>

    <!-- ===== HEADER (Navigasi Halaman) ===== -->
    <header class="fixed w-full top-0 z-40 transition-all duration-300" id="main-header">
        <div class="absolute inset-0 glass-clean shadow-sm"></div>
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 relative">
            <div class="flex justify-between items-center">
                <!-- Logo -->
                <a href="#" onclick="switchPage('home')" class="flex items-center gap-2 group">
                    <div class="w-10 h-10 bg-softblue-500 rounded-lg flex items-center justify-center text-white shadow-soft group-hover:bg-softblue-600 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                        </svg>
                    </div>
                    <span class="text-2xl font-extrabold text-ink-900 tracking-tight">Perpus<span class="text-softblue-500">Digital</span></span>
                </a>
                
                <!-- Desktop Menu -->
                <div class="hidden md:flex items-center space-x-8">
                    <button onclick="switchPage('home')" id="nav-home" class="nav-link text-sm font-bold text-ink-800 hover:text-softblue-500 transition-colors active">Beranda</button>
                    <button onclick="switchPage('collection')" id="nav-collection" class="nav-link text-sm font-bold text-ink-800 hover:text-softblue-500 transition-colors">Koleksi</button>
                    <button onclick="switchPage('topics')" id="nav-topics" class="nav-link text-sm font-bold text-ink-800 hover:text-softblue-500 transition-colors">Topik</button>
                    
                    <button id="login-btn" class="px-6 py-2.5 bg-softblue-500 text-white rounded-full font-bold text-sm hover:bg-softblue-600 transition-all shadow-glow transform hover:-translate-y-0.5 flex items-center gap-2">
                        Masuk
                    </button>
                </div>

                <!-- Mobile Menu Button -->
                <div class="md:hidden">
                    <button id="hamburger-btn" class="text-ink-900 focus:outline-none p-2">
                        <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M4 6h16M4 12h16m-7 6h7"></path>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Mobile Dropdown -->
            <div id="mobile-menu" class="md:hidden hidden mt-4 bg-white rounded-xl shadow-soft border border-paper-200 p-4 absolute left-4 right-4 top-full">
                <button onclick="switchPage('home')" class="block w-full text-left py-3 px-4 text-ink-800 hover:bg-paper-100 rounded-lg font-bold">Beranda</button>
                <button onclick="switchPage('collection')" class="block w-full text-left py-3 px-4 text-ink-800 hover:bg-paper-100 rounded-lg font-bold">Koleksi</button>
                <button onclick="switchPage('topics')" class="block w-full text-left py-3 px-4 text-ink-800 hover:bg-paper-100 rounded-lg font-bold">Topik</button>
            </div>
        </nav>
    </header>

    <!-- ===== KONTEN UTAMA (Dynamic Pages) ===== -->
    <main class="flex-grow relative pt-24">
        
        <!-- === HALAMAN 1: BERANDA === -->
        <section id="page-home" class="page-section active">
            <!-- Hero Section -->
            <div class="relative py-20 overflow-hidden bg-paper-50">
                <div class="absolute top-0 right-0 -mr-20 -mt-20 w-96 h-96 bg-softblue-400/10 rounded-full blur-3xl"></div>
                <div class="absolute bottom-0 left-0 -ml-20 -mb-20 w-80 h-80 bg-blue-300/10 rounded-full blur-3xl"></div>

                <div class="container mx-auto px-4 relative z-10 text-center">
                    <span class="inline-block py-1.5 px-4 rounded-full bg-softblue-500/10 border border-softblue-500/20 text-softblue-600 text-xs font-extrabold tracking-widest uppercase mb-6">
                        Perpustakaan Masa Depan
                    </span>
                    <h1 class="text-4xl sm:text-5xl md:text-6xl font-extrabold text-ink-900 tracking-tight mb-6 leading-tight">
                        Jelajahi Wawasan, <br class="hidden sm:block" />
                        <span class="text-softblue-500">Raih Masa Depan.</span>
                    </h1>
                    <p class="text-lg text-ink-400 font-medium mb-10 max-w-2xl mx-auto">
                        Akses ribuan buku bisnis, novel, dan panduan beasiswa. Tingkatkan wawasanmu di mana saja, kapan saja.
                    </p>
                    
                    <div class="flex justify-center gap-4">
                        <button onclick="switchPage('collection')" class="px-8 py-4 bg-ink-900 text-white rounded-full font-bold shadow-lg hover:bg-softblue-500 transition-all transform hover:-translate-y-1">
                            Mulai Membaca
                        </button>
                        <button onclick="switchPage('topics')" class="px-8 py-4 bg-white text-ink-900 border border-paper-200 rounded-full font-bold shadow-soft hover:border-softblue-500 transition-all">
                            Jelajahi Topik
                        </button>
                    </div>
                </div>
            </div>

            <!-- Preview Koleksi (Hanya 4 Buku) -->
            <div class="container mx-auto px-4 py-12">
                <div class="flex justify-between items-end mb-8">
                    <h2 class="text-2xl font-extrabold text-ink-900">Buku Pilihan Editor</h2>
                    <button onclick="switchPage('collection')" class="text-softblue-500 font-bold hover:text-softblue-600 text-sm">Lihat Semua &rarr;</button>
                </div>
                <div id="home-book-grid" class="grid grid-cols-2 md:grid-cols-4 gap-6">
                    <!-- Diisi JS -->
                </div>
            </div>
        </section>


        <!-- === HALAMAN 2: KOLEKSI (Pencarian & Semua Buku) === -->
        <section id="page-collection" class="page-section">
            <div class="bg-white border-b border-paper-200 py-8 mb-8 sticky top-[72px] z-30 shadow-sm">
                <div class="container mx-auto px-4">
                    <h1 class="text-3xl font-extrabold text-ink-900 mb-4">Koleksi Lengkap</h1>
                    <!-- Search Bar -->
                    <div class="relative max-w-2xl">
                        <input type="text" id="search-input" placeholder="Cari judul buku, penulis, atau ISBN..." 
                               class="w-full p-4 pl-12 bg-paper-50 border border-paper-200 rounded-xl focus:ring-2 focus:ring-softblue-500 focus:outline-none font-medium text-ink-800 transition-all">
                        <svg class="w-6 h-6 text-ink-400 absolute left-4 top-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                    </div>
                </div>
            </div>

            <div class="container mx-auto px-4 pb-12">
                <div id="collection-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6">
                    <!-- Semua buku di sini -->
                </div>
                <div id="no-results" class="hidden text-center py-20">
                    <p class="text-xl font-bold text-ink-400">Buku tidak ditemukan.</p>
                </div>
            </div>
        </section>


        <!-- === HALAMAN 3: TOPIK (Kategori) === -->
        <section id="page-topics" class="page-section">
            <div class="bg-paper-50 py-12 mb-8">
                <div class="container mx-auto px-4 text-center">
                    <h1 class="text-3xl font-extrabold text-ink-900 mb-6">Jelajahi Berdasarkan Topik</h1>
                    <div id="topic-pills" class="flex flex-wrap justify-center gap-3 max-w-4xl mx-auto">
                        <!-- Kategori di sini -->
                    </div>
                </div>
            </div>

            <div class="container mx-auto px-4 pb-12">
                <div id="topic-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6">
                    <!-- Buku difilter di sini -->
                </div>
            </div>
        </section>

    </main>

    <!-- ===== FOOTER ===== -->
    <footer class="bg-white border-t border-paper-200 pt-12 pb-8 mt-auto">
        <div class="container mx-auto px-4 text-center">
            <span class="text-2xl font-extrabold text-ink-900">Perpus<span class="text-softblue-500">Digital</span></span>
            <p class="text-ink-400 mt-4 text-sm font-medium">&copy; 2025. Dibuat untuk Pelajar Indonesia.</p>
        </div>
    </footer>

    <!-- ===== MODAL DETAIL BUKU ===== -->
    <div id="book-modal" class="fixed inset-0 z-50 flex items-center justify-center p-4 hidden opacity-0 transition-opacity duration-300">
        <div class="absolute inset-0 bg-ink-900/50 backdrop-blur-sm" id="modal-backdrop"></div>
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto relative z-10 transform scale-95 transition-all duration-300 p-0" id="modal-panel">
            <button id="close-modal" class="absolute top-4 right-4 p-2 bg-paper-100 rounded-full text-ink-400 hover:bg-softblue-500 hover:text-white transition-colors z-20">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <div id="modal-content"></div>
        </div>
    </div>

    <!-- ===== JAVASCRIPT ===== -->
    <script>
        // === DATA BUKU (LENGKAP) ===
        const books = [
            // KOLEKSI BEST SELLER & NOVEL (Drive Baru)
            { id: 301, title: 'Si Putih', author: 'Tere Liye', category: 'Novel', cover: 'https://placehold.co/300x400/333333/ffffff?text=Si+Putih', description: 'Petualangan di dunia paralel. Spin-off dari serial BUMI yang mengisahkan masa lalu si Putih.', fileUrl: 'https://drive.google.com/open?id=1NlsZHBni2mec9m8-oTgKOHyxee-gISvQ' },
            { id: 304, title: 'Laskar Pelangi', author: 'Andrea Hirata', category: 'Novel', cover: 'https://covers.openlibrary.org/b/isbn/9789793062792-L.jpg', description: 'Kisah perjuangan 10 anak Belitong mengejar mimpi di tengah keterbatasan.', fileUrl: 'https://drive.google.com/open?id=1YKeM6ARgdEO-Vw6sw--Ous0cGHaQNfu9' },
            { id: 305, title: 'Thinking, Fast and Slow', author: 'Daniel Kahneman', category: 'Psikologi', cover: 'https://covers.openlibrary.org/b/isbn/9780374275631-L.jpg', description: 'Menjelaskan dua sistem berpikir manusia: Sistem 1 yang cepat & intuitif, dan Sistem 2 yang lambat & logis.', fileUrl: 'https://drive.google.com/open?id=1KGcJ6FfEM5FJgqvkVlkXyPEl-tG0L3R_' },
            { id: 308, title: 'Grit: The Power of Passion', author: 'Angela Duckworth', category: 'Psikologi', cover: 'https://covers.openlibrary.org/b/isbn/9781501111105-L.jpg', description: 'Rahasia kesuksesan bukan sekadar bakat, melainkan perpaduan hasrat dan kegigihan.', fileUrl: 'https://drive.google.com/open?id=1GuofzHN3URRb4lvChW2z_ytF8TN02J3k' },
            { id: 313, title: 'Sapiens', author: 'Yuval Noah Harari', category: 'Sejarah', cover: 'https://covers.openlibrary.org/b/isbn/9780062316097-L.jpg', description: 'Menjelajahi sejarah umat manusia dari zaman batu hingga era modern.', fileUrl: 'https://drive.google.com/open?id=1VB3Cq0Dn9rJn7Wwn8wRqP7StEEX80qfL' },
            
            // KOLEKSI SEBELUMNYA (Drive Lama)
            { id: 1, title: 'Zero to One', author: 'Peter Thiel', category: 'Bisnis', cover: 'https://covers.openlibrary.org/b/isbn/9780804139298-L.jpg', description: 'Catatan tentang startup, bagaimana membangun masa depan, dan menciptakan inovasi dari 0 ke 1.', fileUrl: 'https://morfene.com/021.pdf' },
            { id: 2, title: '5 Rahasia Pribadi Luar Biasa', author: 'Seno Aji Airlangga', category: 'Motivasi', cover: 'https://placehold.co/300x400/3B82F6/ffffff?text=Pribadi+Luar+Biasa', description: 'Panduan transformasi diri untuk menjadi pribadi berkualitas.', fileUrl: 'https://drive.google.com/open?id=11aul0V5pAhFBvzPd8qVUfUZuQ9s7KtEB' },
            { id: 4, title: 'The 7 Habits (Ringkasan)', author: 'Stephen R. Covey', category: 'Produktivitas', cover: 'https://covers.openlibrary.org/b/isbn/9780743269513-L.jpg', description: 'Ringkasan kebiasaan manusia efektif.', fileUrl: 'https://drive.google.com/open?id=1J8Rgyy_EGi41Oytzz_SakDrnaiA1eMee' },
            { id: 9, title: 'Cara Dapat Beasiswa S1', author: 'Ahmad Arib', category: 'Beasiswa', cover: 'https://placehold.co/300x400/3B82F6/ffffff?text=Beasiswa+S1', description: 'Petunjuk mendapatkan S1 gratisan di dalam dan luar negeri.', fileUrl: 'https://drive.google.com/open?id=1IaDHvRJ-K4mM0Oz_Ft6I-BCCzM14erxt' },
            { id: 10, title: 'Scholarship Hunters', author: 'Budi Waluyo', category: 'Beasiswa', cover: 'https://placehold.co/300x400/3B82F6/ffffff?text=Scholarship', description: 'Motivasi meraih beasiswa S2 ke luar negeri.', fileUrl: 'https://drive.google.com/open?id=1JnchB4FXjsFBFxJ426UeWGdCNLL-gfLM' },
            { id: 302, title: 'Seni Berbicara', author: 'Oh Su Hyang', category: 'Pengembangan Diri', cover: 'https://placehold.co/300x400/ffafcc/333333?text=Seni+Berbicara', description: 'Teknik komunikasi yang baik.', fileUrl: 'https://drive.google.com/open?id=1YB2XmOVVDi2xcfyVCceHrlsLA3OiwHCT' },
            { id: 307, title: 'Rework', author: 'Jason Fried', category: 'Bisnis', cover: 'https://covers.openlibrary.org/b/isbn/9780307463746-L.jpg', description: 'Cara berbeda menjalankan bisnis.', fileUrl: 'https://drive.google.com/open?id=1JANvvwVaIlhtNSPX9gFWSYrAVT1gLl3k' },
            { id: 112, title: 'Panduan Studi di UK', author: 'PPI UK', category: 'Pendidikan', cover: 'https://placehold.co/300x400/3B82F6/ffffff?text=Studi+UK', description: 'Informasi lengkap kuliah di Britania Raya.', fileUrl: 'https://drive.google.com/open?id=1mp0yr7q71_Qx1YnamgOegZasATtskuHh' },
            { id: 309, title: 'Berani Tidak Disukai', author: 'Ichiro Kishimi', category: 'Filosofi', cover: 'https://covers.openlibrary.org/b/isbn/9781501197277-L.jpg', description: 'Dialog filosofis Adlerian.', fileUrl: 'https://drive.google.com/open?id=17h1cGRj-ETsnGz1d8sr4YV0YF167PhI8' },
            { id: 310, title: 'Nunchi', author: 'Euny Hong', category: 'Pengembangan Diri', cover: 'https://placehold.co/300x400/fca311/ffffff?text=Nunchi', description: 'Seni membaca pikiran dari Korea.', fileUrl: 'https://drive.google.com/open?id=1VMrKu4VImVa7u4QXhJ5-Bj3DjZ_cvnmL' }
        ];

        // === LOGIKA NAVIGASI HALAMAN (SPA) ===
        function switchPage(pageId) {
            // 1. Sembunyikan semua section
            document.querySelectorAll('.page-section').forEach(el => {
                el.classList.remove('active');
            });
            
            // 2. Tampilkan section yang dipilih
            const target = document.getElementById(`page-${pageId}`);
            if(target) {
                target.classList.add('active');
            }

            // 3. Update menu aktif
            document.querySelectorAll('.nav-link').forEach(el => {
                el.classList.remove('active');
            });
            const navBtn = document.getElementById(`nav-${pageId}`);
            if(navBtn) {
                navBtn.classList.add('active');
            }

            // 4. Reset scroll ke atas
            window.scrollTo({ top: 0, behavior: 'smooth' });

            // 5. Logika khusus per halaman
            if(pageId === 'home') renderHome();
            if(pageId === 'collection') renderCollection(books);
            if(pageId === 'topics') renderTopics();
        }

        // === RENDER FUNGSI ===
        function createBookCard(book) {
            const safeTitle = encodeURIComponent(book.title.substring(0, 20));
            return `
                <div class="group flex flex-col cursor-pointer animate-fadeIn" onclick="openModal(${book.id})">
                    <div class="relative rounded-lg shadow-soft hover:shadow-xl transition-all duration-300 transform group-hover:-translate-y-2 mb-3 bg-white aspect-[2/3] overflow-hidden border border-paper-200">
                        <img src="${book.cover}" alt="${book.title}" class="w-full h-full object-cover"
                             onerror="this.onerror=null;this.src='https://placehold.co/300x400/3B82F6/ffffff?text=${safeTitle}';">
                        <div class="absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors"></div>
                    </div>
                    <div>
                        <h3 class="font-extrabold text-ink-900 text-md leading-tight mb-1 line-clamp-2 group-hover:text-softblue-500 transition-colors">${book.title}</h3>
                        <p class="text-xs text-ink-400 font-semibold mb-1">${book.author}</p>
                        <span class="inline-block bg-softblue-50 text-softblue-600 text-[10px] font-bold px-2 py-0.5 rounded uppercase tracking-wide">${book.category}</span>
                    </div>
                </div>
            `;
        }

        function renderHome() {
            const container = document.getElementById('home-book-grid');
            // Ambil 4 buku pertama secara acak atau statis
            const featured = books.slice(0, 4); 
            container.innerHTML = featured.map(book => createBookCard(book)).join('');
        }

        function renderCollection(data) {
            const container = document.getElementById('collection-grid');
            container.innerHTML = data.map(book => createBookCard(book)).join('');
            
            const noResult = document.getElementById('no-results');
            if(data.length === 0) noResult.classList.remove('hidden');
            else noResult.classList.add('hidden');
        }

        function renderTopics() {
            const pillsContainer = document.getElementById('topic-pills');
            const gridContainer = document.getElementById('topic-grid');
            
            // Ambil kategori unik
            const categories = ['Semua', ...new Set(books.map(b => b.category))];
            
            pillsContainer.innerHTML = categories.map(cat => `
                <button onclick="filterTopic('${cat}')" 
                        class="px-5 py-2 rounded-full text-sm font-bold border-2 border-paper-200 bg-white text-ink-400 hover:border-softblue-500 hover:text-softblue-600 transition-all topic-btn"
                        data-cat="${cat}">
                    ${cat}
                </button>
            `).join('');
            
            // Default tampilkan semua
            filterTopic('Semua');
        }

        function filterTopic(category) {
            // Update UI Tombol
            document.querySelectorAll('.topic-btn').forEach(btn => {
                if(btn.dataset.cat === category) {
                    btn.classList.remove('bg-white', 'text-ink-400', 'border-paper-200');
                    btn.classList.add('bg-softblue-500', 'text-white', 'border-softblue-500', 'shadow-md');
                } else {
                    btn.classList.add('bg-white', 'text-ink-400', 'border-paper-200');
                    btn.classList.remove('bg-softblue-500', 'text-white', 'border-softblue-500', 'shadow-md');
                }
            });

            // Filter Data
            const filtered = category === 'Semua' ? books : books.filter(b => b.category === category);
            const gridContainer = document.getElementById('topic-grid');
            gridContainer.innerHTML = filtered.map(book => createBookCard(book)).join('');
        }

        // === SEARCH LOGIC ===
        document.getElementById('search-input').addEventListener('input', (e) => {
            const term = e.target.value.toLowerCase();
            const filtered = books.filter(b => 
                b.title.toLowerCase().includes(term) || 
                b.author.toLowerCase().includes(term)
            );
            renderCollection(filtered);
        });

        // === MODAL LOGIC ===
        function openModal(id) {
            const book = books.find(b => b.id === id);
            if(!book) return;
            
            const content = document.getElementById('modal-content');
            const safeTitle = encodeURIComponent(book.title.substring(0, 20));
            
            content.innerHTML = `
                <div class="flex flex-col md:flex-row bg-paper-50 h-full overflow-hidden">
                    <div class="w-full md:w-5/12 bg-paper-100 p-8 flex items-center justify-center">
                        <img src="${book.cover}" class="w-48 rounded shadow-xl transform rotate-2 hover:rotate-0 transition-transform duration-500"
                             onerror="this.onerror=null;this.src='https://placehold.co/300x400/3B82F6/ffffff?text=${safeTitle}';">
                    </div>
                    <div class="w-full md:w-7/12 p-8 md:p-12 overflow-y-auto">
                        <span class="text-softblue-500 font-extrabold text-sm tracking-widest uppercase mb-2 block">${book.category}</span>
                        <h2 class="text-3xl font-extrabold text-ink-900 mb-2">${book.title}</h2>
                        <p class="text-lg text-ink-400 font-semibold mb-6">Oleh ${book.author}</p>
                        <div class="prose prose-slate mb-8">
                            <h4 class="font-bold text-ink-900 border-b-2 border-paper-200 pb-2 mb-2">Sinopsis</h4>
                            <p class="text-ink-800 leading-relaxed">${book.description}</p>
                        </div>
                        <a href="${book.fileUrl}" target="_blank" class="inline-flex items-center justify-center w-full py-4 bg-ink-900 text-white font-bold rounded-lg hover:bg-softblue-500 transition-all shadow-lg">
                            BACA SEKARANG
                        </a>
                    </div>
                </div>
            `;
            
            const modal = document.getElementById('book-modal');
            modal.classList.remove('hidden');
            setTimeout(() => modal.classList.remove('opacity-0'), 10);
        }

        function closeModal() {
            const modal = document.getElementById('book-modal');
            modal.classList.add('opacity-0');
            setTimeout(() => modal.classList.add('hidden'), 300);
        }

        document.getElementById('close-modal').addEventListener('click', closeModal);
        document.getElementById('modal-backdrop').addEventListener('click', closeModal);

        // === INIT ===
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('loading-screen').style.opacity = '0';
                setTimeout(() => document.getElementById('loading-screen').style.display = 'none', 800);
            }, 2000);
            
            switchPage('home'); // Mulai dari Beranda
        });

        // Login Mockup
        document.getElementById('login-btn').addEventListener('click', function() {
            this.innerHTML = 'Halo, Pelajar';
            this.classList.remove('bg-softblue-500');
            this.classList.add('bg-ink-900');
            alert("Login Berhasil! Selamat datang.");
        });

    </script>
</body>
</html>
